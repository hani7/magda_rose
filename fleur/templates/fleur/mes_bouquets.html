{% extends "fleur/base.html" %}
{% block title %}Mes bouquets{% endblock %}

{% block content %}
<h1 style="margin:0 0 .75rem;">Mes bouquets</h1>

{% if slots %}
  <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:16px;">
    {% for s in slots %}
      <article style="border:1px solid #eee; border-radius:12px; overflow:hidden; background:#fff;">
        <div style="position:relative;">
          {% if s.product.image %}
            <a href="{% url 'fleur:buy_now' s.product.slug %}?slot={{ s.id }}" style="display:block;">
              <img src="{{ s.product.image.url }}" alt="{{ s.product.name }}" style="width:100%; height:220px; object-fit:cover; display:block;">
            </a>
          {% else %}
            <a href="{% url 'fleur:buy_now' s.product.slug %}?slot={{ s.id }}" style="display:block; width:100%; height:220px; background:#f3f3f3;"></a>
          {% endif %}
          <!-- SLOT BADGE -->
          <div style="
            position:absolute; top:8px; left:8px;
            background:rgba(0,0,0,.72); color:#fff;
            font-weight:600; font-size:.95rem;
            padding:.25rem .5rem; border-radius:999px;">
            Slot {{ s.code }}
          </div>
          <!-- QTY BADGE (optional) -->
          <div style="
            position:absolute; bottom:8px; right:8px;
            background:rgba(255,255,255,.85); color:#333;
            font-size:.8rem; padding:.15rem .5rem; border-radius:999px; border:1px solid #ddd;">
            Stock: {{ s.quantity }}
          </div>
        </div>

        <div style="padding:.75rem;">
          <h3 style="margin:0 0 .25rem; font-size:1.05rem;">{{ s.product.name }}</h3>
          <p style="margin:0 0 .5rem;"><strong>{{ s.product.price }} DA</strong></p>

          <a role="button"
             href="{% url 'fleur:buy_now' s.product.slug %}?slot={{ s.id }}"
             style="display:inline-block; padding:.5rem .75rem; border-radius:8px; background:#111; color:#fff; text-decoration:none;">
            Acheter maintenant
          </a>
        </div>
      </article>
    {% endfor %}
  </div>
{% else %}
  <p>Aucun bouquet disponible pour le moment.</p>
{% endif %}
{% endblock %}
